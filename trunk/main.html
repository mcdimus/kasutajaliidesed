<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />

        <title>Kasutajaliidesed</title>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"> </script>
        <script type="text/javascript" src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.debug.js"> </script>
        <link rel="stylesheet" href="css/style.css"/>
    </head>
    <body>

        <div id="main-wrapper">

            <div id="header-wrapper">
                <div id="logo">
                    <a href="index.html" title="TODO">
                        <img src="img/logo.png" width="70%" height="70%" alt="TODO"/>
                    </a>
                </div>
                <div class="sign-out">
                    <form id="signout-form" action="#" method="post">
                        <div class="signout-div">
                            <span id="login-span">
                                User:
                                <strong class="login-label">Username</strong>
                            </span>
                            <input type="hidden" spellcheck="false" name="login" value=""/>
                        </div>
                        <input type="submit" class="g-button g-button-submit" name="signOut" id="signOut" value="Sign out"/>
                    </form>
                </div>
            </div>
            <!--end header-wrapper-->

            <div id="content-wrapper">
                <div class="tag-container" >
                    <h3>Tags</h3>
                    <ul data-bind="foreach: tags">
                        <li>
                            <input type="checkbox" data-bind="checked: isChecked" />
                            <span data-bind="text: name"></span>
                        </li>
                    </ul>
                    <button data-bind="click: deleteTags" id="deleteTags" class="g-button" name="deleteTags">Delete checked</button>
                    <input type="text" id="newtag" name="newtag" placeholder="New tag name..." />
                    <button data-bind="click: addTag" id="addtag" class="g-button" name="addtag">Add</button>
                    <script type="text/javascript" >

                        function Tag(name, checked) {
                            return {
                                name : ko.observable(name),
                                isChecked : ko.observable(checked)
                            };
                        }

                        function TagsViewModel() {
                            var self = this;

                            self.tags =
                                ko.observableArray([
                                new Tag("school",false),
                                new Tag("birthday",false),
                                new Tag("meeting",false),
                                new Tag("work",false)
                            ]);

                            self.addTag = function () {

                                // TODO use ko here
                                var newTag = $('input[name=newtag]').val();
                                if (newTag != '')
                                    self.tags.push(new Tag(newTag, false));
                            };
                            self.deleteTags = function() {
                                var selectedTags = $.grep(self.tags(), function(tag) {

                                    return (tag.isChecked());
                                });
                                console.log(selectedTags[0].name());
                                ko.utils.arrayForEach(selectedTags, function(tag) {
                                    self.tags.remove(tag);
                                });
                            };
                        }

                        ko.applyBindings(new TagsViewModel());

                    </script>

                </div>

                <div class="main">
                    Something BIG will be here!
                </div>

            </div>
            <!--end content-wrapper-->
            <div id="footer-wrapper">
                <ul id="footer-container-right">
                    <li id="copyright">
                        Copyright © 2012
                        <a href="" title="// TODO:">// TODO:</a>
                        . All Rights Reserved
                    </li>
                    <!--end copyright-->
                    <li id="designed">
                        Designed by Dmitri Maksimov
                    </li>
                    <!--end designed -->
                </ul>
            </div>
            <!--end footer-wrapper-->
        </div>
        <!--end main wrapper-->
    </body>
</html>